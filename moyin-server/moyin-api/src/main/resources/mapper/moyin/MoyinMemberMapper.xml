<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.moyin.tts.mapper.MoyinMemberMapper">

    <resultMap type="com.moyin.tts.domain.MoyinMember" id="MoyinMemberResult">
        <result property="id" column="id"/>
        <result property="userId" column="user_id"/>
        <result property="userName" column="user_name"/>
        <result property="phoneNumber" column="phone_number"/>
        <result property="level" column="level"/>
        <result property="status" column="status"/>
        <result property="points" column="points"/>
        <result property="count" column="count"/>
        <result property="total" column="total"/>
        <result property="startTime" column="start_time"/>
        <result property="endTime" column="end_time"/>
        <result property="lastLoginTime" column="last_login_time"/>
        <result property="registerTime" column="register_time"/>
        <result property="updateBy" column="update_by"/>
        <result property="updateTime" column="update_time"/>
    </resultMap>

    <sql id="selectMoyinMemberVo">
        select m.id              as id,
               m.user_id         as user_id,
               u.user_name       as user_name,
               m.phone_number    as phone_number,
               m.level           as level,
               m.status          as status,
               m.points          as points,
               m.count           as count,
               m.total           as total,
               m.start_time      as start_time,
               m.end_time        as end_time,
               m.last_login_time as last_login_time,
               m.register_time   as register_time,
               m.update_by       as update_by,
               m.update_time     as update_time
        from moyin_member as m
                 left join sys_user as u
                           on u.user_id = m.user_id
    </sql>

    <insert id="insert" parameterType="com.moyin.tts.domain.MoyinMember">
        insert into moyin_member
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="userId != null">user_id,</if>
            <if test="phoneNumber != null">phone_number,</if>
            <if test="level != null">level,</if>
            <if test="status != null">status,</if>
            <if test="points != null">points,</if>
            <if test="count != null">count,</if>
            <if test="total != null">total,</if>
            <if test="startTime != null">start_time,</if>
            <if test="endTime != null">end_time,</if>
            <if test="total != null">total,</if>
            <if test="lastLoginTime != null">last_login_time,</if>
            <if test="registerTime != null">register_time,</if>
            <if test="updateBy != null">update_by,</if>
            <if test="updateTime != null">update_time,</if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="userId != null">#{userId},</if>
            <if test="phoneNumber != null">#{phoneNumber},</if>
            <if test="level != null">#{level},</if>
            <if test="status != null">#{status},</if>
            <if test="points != null">#{points},</if>
            <if test="count != null">#{count},</if>
            <if test="total != null">#{total},</if>
            <if test="startTime != null">#{startTime},</if>
            <if test="endTime != null">#{endTime},</if>
            <if test="total != null">#{total},</if>
            <if test="lastLoginTime != null">#{lastLoginTime},</if>
            <if test="registerTime != null">#{registerTime},</if>
            <if test="updateBy != null">#{updateBy},</if>
            <if test="updateTime != null">#{updateTime},</if>
        </trim>
    </insert>

    <update id="updateById" parameterType="com.moyin.tts.domain.MoyinMember">
        update moyin_member
        <trim prefix="set" suffixOverrides=",">
            <if test="userId != null">name = #{userId},</if>
            <if test="phoneNumber != null">phone_number = #{phoneNumber},</if>
            <if test="level != null">level = #{level},</if>
            <if test="status != null">status = #{status},</if>
            <if test="points != null">points = #{points},</if>
            <if test="count != null">count = #{count},</if>
            <if test="total != null">totsl = #{total},</if>
            <if test="startTime != null">start_time = #{startTime},</if>
            <if test="endTime != null">end_time = #{endTime},</if>
            <if test="total != null">total = #{total},</if>
            <if test="lastLoginTime != null">last_login_time = #{lastLoginTime},</if>
            <if test="registerTime != null">register_time = #{registerTime},</if>
            <if test="updateBy != null">update_by = #{updateBy},</if>
            <if test="updateTime != null">update_time = #{updateTime},</if>
        </trim>
        where id=#{id}
    </update>

    <delete id="deleteById" parameterType="Long">
        delete
        from moyin_member
        where id = #{id}
    </delete>

    <delete id="deleteByIds" parameterType="String">
        delete from moyin_member where id in
        <foreach item="id" collection="array" open="(" separator="," close=")">
            #{id}
        </foreach>
    </delete>

    <select id="selectById" parameterType="Long" resultMap="MoyinMemberResult">
        <include refid="selectMoyinMemberVo"/>
        where m.id = #{id}
    </select>

    <select id="selectList" parameterType="com.moyin.tts.domain.MoyinMember" resultMap="MoyinMemberResult">
        <include refid="selectMoyinMemberVo"/>
    </select>

</mapper>